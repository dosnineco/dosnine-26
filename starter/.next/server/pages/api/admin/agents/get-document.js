"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/agents/get-document";
exports.ids = ["pages/api/admin/agents/get-document"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fagents%2Fget-document&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fagents%2Fget-document.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fagents%2Fget-document&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fagents%2Fget-document.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_agents_get_document_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/admin/agents/get-document.js */ \"(api)/./pages/api/admin/agents/get-document.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_agents_get_document_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_agents_get_document_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/agents/get-document\",\n        pathname: \"/api/admin/agents/get-document\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_agents_get_document_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGYWdlbnRzJTJGZ2V0LWRvY3VtZW50JnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZhZG1pbiUyRmFnZW50cyUyRmdldC1kb2N1bWVudC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNxRTtBQUNyRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsb0VBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG9FQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3JlbnRhbC1qYW1haWNhLXN0YXJ0ZXIvPzgyZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9hZG1pbi9hZ2VudHMvZ2V0LWRvY3VtZW50LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vYWdlbnRzL2dldC1kb2N1bWVudFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL2FnZW50cy9nZXQtZG9jdW1lbnRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fagents%2Fget-document&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fagents%2Fget-document.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://etikxypnxjsonefwnzkr.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0aWt4eXBueGpzb25lZnduemtyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4Nzk4ODUsImV4cCI6MjA3OTQ1NTg4NX0.3AGs-ZM_EBN3wVGyuHk2tXfhrB_F0a48SKRWhipxVZg\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxrQkFBa0JILGtOQUF5QztBQUUxRCxNQUFNSyxXQUFXUCxtRUFBWUEsQ0FBQ0MsYUFBYUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmVudGFsLWphbWFpY2Etc3RhcnRlci8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.js\n");

/***/ }),

/***/ "(api)/./pages/api/admin/agents/get-document.js":
/*!************************************************!*\
  !*** ./pages/api/admin/agents/get-document.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(api)/./lib/supabase.js\");\n\n// Get signed URL for viewing agent verification document\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const { clerkId, path } = req.query;\n    if (!clerkId || !path) {\n        return res.status(400).json({\n            error: \"Missing required parameters\"\n        });\n    }\n    try {\n        // SECURITY: Verify user is admin\n        const { data: adminUser } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").select(\"id, role\").eq(\"clerk_id\", clerkId).eq(\"role\", \"admin\").single();\n        if (!adminUser) {\n            return res.status(403).json({\n                error: \"Access denied - Admin only\"\n            });\n        }\n        // Clean the path - remove bucket name if included\n        let cleanPath = path;\n        if (cleanPath.includes(\"agent-documents/\")) {\n            cleanPath = cleanPath.split(\"agent-documents/\").pop();\n        }\n        // Remove query parameters if any\n        cleanPath = cleanPath.split(\"?\")[0];\n        console.log(\"Fetching document:\", cleanPath);\n        // Generate signed URL valid for 1 hour\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"agent-documents\").createSignedUrl(cleanPath, 3600); // 1 hour\n        if (error) {\n            console.error(\"Failed to create signed URL:\", error);\n            // Try public URL as fallback\n            const { data: publicData } = _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.storage.from(\"agent-documents\").getPublicUrl(cleanPath);\n            if (publicData?.publicUrl) {\n                return res.status(200).json({\n                    signedUrl: publicData.publicUrl,\n                    expiresIn: 3600,\n                    fallback: true\n                });\n            }\n            return res.status(500).json({\n                error: \"Failed to generate document URL\"\n            });\n        }\n        return res.status(200).json({\n            signedUrl: data.signedUrl,\n            expiresIn: 3600\n        });\n    } catch (error) {\n        console.error(\"Document URL error:\", error);\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWRtaW4vYWdlbnRzL2dldC1kb2N1bWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwQztBQUUxQyx5REFBeUQ7QUFDMUMsZUFBZUMsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxJQUFJLEVBQUUsR0FBR1AsSUFBSVEsS0FBSztJQUVuQyxJQUFJLENBQUNGLFdBQVcsQ0FBQ0MsTUFBTTtRQUNyQixPQUFPTixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBOEI7SUFDckU7SUFFQSxJQUFJO1FBQ0YsaUNBQWlDO1FBQ2pDLE1BQU0sRUFBRUksTUFBTUMsU0FBUyxFQUFFLEdBQUcsTUFBTVosbURBQVFBLENBQ3ZDYSxJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLFlBQ1BDLEVBQUUsQ0FBQyxZQUFZUCxTQUNmTyxFQUFFLENBQUMsUUFBUSxTQUNYQyxNQUFNO1FBRVQsSUFBSSxDQUFDSixXQUFXO1lBQ2QsT0FBT1QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUE2QjtRQUNwRTtRQUVBLGtEQUFrRDtRQUNsRCxJQUFJVSxZQUFZUjtRQUNoQixJQUFJUSxVQUFVQyxRQUFRLENBQUMscUJBQXFCO1lBQzFDRCxZQUFZQSxVQUFVRSxLQUFLLENBQUMsb0JBQW9CQyxHQUFHO1FBQ3JEO1FBQ0EsaUNBQWlDO1FBQ2pDSCxZQUFZQSxVQUFVRSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFFbkNFLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0JMO1FBRWxDLHVDQUF1QztRQUN2QyxNQUFNLEVBQUVOLElBQUksRUFBRUosS0FBSyxFQUFFLEdBQUcsTUFBTVAsbURBQVFBLENBQUN1QixPQUFPLENBQzNDVixJQUFJLENBQUMsbUJBQ0xXLGVBQWUsQ0FBQ1AsV0FBVyxPQUFPLFNBQVM7UUFFOUMsSUFBSVYsT0FBTztZQUNUYyxRQUFRZCxLQUFLLENBQUMsZ0NBQWdDQTtZQUM5Qyw2QkFBNkI7WUFDN0IsTUFBTSxFQUFFSSxNQUFNYyxVQUFVLEVBQUUsR0FBR3pCLG1EQUFRQSxDQUFDdUIsT0FBTyxDQUMxQ1YsSUFBSSxDQUFDLG1CQUNMYSxZQUFZLENBQUNUO1lBRWhCLElBQUlRLFlBQVlFLFdBQVc7Z0JBQ3pCLE9BQU94QixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQnNCLFdBQVdILFdBQVdFLFNBQVM7b0JBQy9CRSxXQUFXO29CQUNYQyxVQUFVO2dCQUNaO1lBQ0Y7WUFFQSxPQUFPM0IsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFrQztRQUN6RTtRQUVBLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJzQixXQUFXakIsS0FBS2lCLFNBQVM7WUFDekJDLFdBQVc7UUFDYjtJQUVGLEVBQUUsT0FBT3RCLE9BQU87UUFDZGMsUUFBUWQsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsT0FBT0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXdCO0lBQy9EO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZW50YWwtamFtYWljYS1zdGFydGVyLy4vcGFnZXMvYXBpL2FkbWluL2FnZW50cy9nZXQtZG9jdW1lbnQuanM/NTM1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcblxuLy8gR2V0IHNpZ25lZCBVUkwgZm9yIHZpZXdpbmcgYWdlbnQgdmVyaWZpY2F0aW9uIGRvY3VtZW50XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHsgY2xlcmtJZCwgcGF0aCB9ID0gcmVxLnF1ZXJ5O1xuXG4gIGlmICghY2xlcmtJZCB8fCAhcGF0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXJzJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gU0VDVVJJVFk6IFZlcmlmeSB1c2VyIGlzIGFkbWluXG4gICAgY29uc3QgeyBkYXRhOiBhZG1pblVzZXIgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgnaWQsIHJvbGUnKVxuICAgICAgLmVxKCdjbGVya19pZCcsIGNsZXJrSWQpXG4gICAgICAuZXEoJ3JvbGUnLCAnYWRtaW4nKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKCFhZG1pblVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWNjZXNzIGRlbmllZCAtIEFkbWluIG9ubHknIH0pO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHRoZSBwYXRoIC0gcmVtb3ZlIGJ1Y2tldCBuYW1lIGlmIGluY2x1ZGVkXG4gICAgbGV0IGNsZWFuUGF0aCA9IHBhdGg7XG4gICAgaWYgKGNsZWFuUGF0aC5pbmNsdWRlcygnYWdlbnQtZG9jdW1lbnRzLycpKSB7XG4gICAgICBjbGVhblBhdGggPSBjbGVhblBhdGguc3BsaXQoJ2FnZW50LWRvY3VtZW50cy8nKS5wb3AoKTtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHF1ZXJ5IHBhcmFtZXRlcnMgaWYgYW55XG4gICAgY2xlYW5QYXRoID0gY2xlYW5QYXRoLnNwbGl0KCc/JylbMF07XG5cbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgZG9jdW1lbnQ6JywgY2xlYW5QYXRoKTtcblxuICAgIC8vIEdlbmVyYXRlIHNpZ25lZCBVUkwgdmFsaWQgZm9yIDEgaG91clxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcbiAgICAgIC5mcm9tKCdhZ2VudC1kb2N1bWVudHMnKVxuICAgICAgLmNyZWF0ZVNpZ25lZFVybChjbGVhblBhdGgsIDM2MDApOyAvLyAxIGhvdXJcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBzaWduZWQgVVJMOicsIGVycm9yKTtcbiAgICAgIC8vIFRyeSBwdWJsaWMgVVJMIGFzIGZhbGxiYWNrXG4gICAgICBjb25zdCB7IGRhdGE6IHB1YmxpY0RhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2VcbiAgICAgICAgLmZyb20oJ2FnZW50LWRvY3VtZW50cycpXG4gICAgICAgIC5nZXRQdWJsaWNVcmwoY2xlYW5QYXRoKTtcbiAgICAgIFxuICAgICAgaWYgKHB1YmxpY0RhdGE/LnB1YmxpY1VybCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBcbiAgICAgICAgICBzaWduZWRVcmw6IHB1YmxpY0RhdGEucHVibGljVXJsLFxuICAgICAgICAgIGV4cGlyZXNJbjogMzYwMCxcbiAgICAgICAgICBmYWxsYmFjazogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgZG9jdW1lbnQgVVJMJyB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBcbiAgICAgIHNpZ25lZFVybDogZGF0YS5zaWduZWRVcmwsXG4gICAgICBleHBpcmVzSW46IDM2MDAgXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEb2N1bWVudCBVUkwgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImNsZXJrSWQiLCJwYXRoIiwicXVlcnkiLCJkYXRhIiwiYWRtaW5Vc2VyIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiY2xlYW5QYXRoIiwiaW5jbHVkZXMiLCJzcGxpdCIsInBvcCIsImNvbnNvbGUiLCJsb2ciLCJzdG9yYWdlIiwiY3JlYXRlU2lnbmVkVXJsIiwicHVibGljRGF0YSIsImdldFB1YmxpY1VybCIsInB1YmxpY1VybCIsInNpZ25lZFVybCIsImV4cGlyZXNJbiIsImZhbGxiYWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/agents/get-document.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fagents%2Fget-document&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fagents%2Fget-document.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();