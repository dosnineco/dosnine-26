âœ… COMPLETE SETUP GUIDE (NO SERVICE ROLE KEY NEEDED)

ğŸ”§ RUN THESE 3 SQL SCRIPTS IN ORDER:

STEP 1: Add Payment Columns to Agents Table
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Open this URL:
   https://supabase.com/dashboard/project/etikxypnxjsonefwnzkr/editor

2. Copy ALL the SQL from: add-payment-columns.sql

3. Paste it in the SQL editor

4. Click "Run" or press Ctrl+Enter

5. You should see the column list appear

STEP 2: Create Storage Bucket
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. In the same SQL editor

2. Copy ALL the SQL from: create-agent-documents-bucket.sql

3. Paste it in the SQL editor

4. Click "Run" or press Ctrl+Enter

5. You should see: "Success. No rows returned"

STEP 3: Setup Permissions (Row Level Security)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. In the same SQL editor

2. Copy ALL the SQL from: setup-agents-rls.sql

3. Paste it in the SQL editor

4. Click "Run" or press Ctrl+Enter

5. This allows users and admins to update payment status

STEP 4: Restart Dev Server
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
In terminal, run:
   yarn dev

STEP 5: Try Upload Again
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Go to /agent/payment and upload your payment proof!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

WHAT THIS FIXES:
â€¢ Adds missing payment_proof_url column âœ“
â€¢ Adds missing payment_date column âœ“
â€¢ Creates storage bucket for file uploads âœ“
â€¢ Sets up proper permissions for updates âœ“
â€¢ Admin manual payment toggle button âœ“

ADMIN FEATURES:
â€¢ Go to /admin/agents
â€¢ See "Payment" column with clickable status button
â€¢ Click to toggle between "Paid" and "Unpaid"
â€¢ Only works for approved agents

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
